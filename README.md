# **EternalCraft.efmod**

* [Ð ÑƒÑÑÐºÐ¸Ð¹ ðŸ‘ˆ](https://github.com/2079541547/Terraria-ToolBox/blob/mod/README-ru.md)
* [English ðŸ‘ˆ](https://github.com/2079541547/Terraria-ToolBox/blob/mod/README-en.md)

* è¿™æ˜¯ç‹¬ä¸€æ— äºŒçš„MODï¼Œå¯ä»¥è„±ç¦»å¯åŠ¨å™¨ï¼Œä¹Ÿå¯ä»¥è„±ç¦»ä¸»è¦soï¼Œæˆ‘ä»¬æå€¡è‡ªç”±ï¼Œå¼€å‘è¿‡ç¨‹ä¸­æ— éœ€ä½¿ç”¨ä»»ä½•API
  
  ## Android Studio
  
  * æˆ‘ä»¬æŽ¨èä½¿ç”¨Android Studioæ‰“åŒ…ï¼Œå› ä¸ºå¦‚æžœç”¨å®‰å“ä¸Šçš„ç¼–è¯‘å™¨æ”¯æŒä¸æ˜¯å¾ˆå¥½ï¼Œä½¿ç”¨Android Studioæ‰“åŒ…å¯ä»¥ä½¿ç”¨æœ€å®Œæ•´çš„ä½“ç³»ï¼ŒåŒ…å«ä¸¤ä¸ªå®žä¾‹ï¼Œä¸€ä¸ªä¸Žå®‰å“ä¸Šçš„ç¼–è¯‘å™¨æ— å¤§å·®åˆ«ï¼Œå¦ä¸€ä¸ªåˆ™é›†æˆäº†shadowhook ï¼ŒBNM(ç®€ç§°)ï¼Œæ­¤å®žä¾‹å®Œå…¨è‡ªç”±å¯ä»¥å®Œå…¨è„±ç¦»ä¸»è¦soï¼Œä¸»è¦æ˜¯æ‰©å±•åŽŸæœ¬å—é™çš„åŠŸèƒ½ï¼Œc++20ä¸ºæœ€ä½Žæ ‡å‡†
  
  ## AIDE
  
  * å¿…é¡»å®‰è£…NDKï¼Œc++17ä¸ºæœ€ä½Žæ ‡å‡†ï¼Œæ­¤æ¨¡æ¿å¹¶æ²¡æœ‰å¾ˆå¼ºçš„æ‰©å±•æ€§ï¼Œæœ‰éƒ¨åˆ†ä¾æ—§éœ€è¦ä¾èµ–ä¸»è¦soï¼Œå¦‚è°ƒç”¨æ¸¸æˆåŽŸå‡½æ•°ç­‰
  
  # å¦‚ä½•åˆ¶ä½œModï¼Ÿ
  
  * å‡†å¤‡ç¼–è¯‘å·¥å…·ï¼Œä½¿ç”¨c++ä¸ºæ ‡å‡†
    
    ## 1.åˆ›å»ºä½ çš„ä»£ç 
    
    ```C++
    /*
      æ­¤ä¸ºæœ€ç®€å•çš„å®žä¾‹ä»£ç 
    */
    
    extern "C"{
      //å¿…é¡»ä½¿ç”¨extern "C"ï¼å¦åˆ™æ— æ³•è¢«Majorè°ƒç”¨ï¼Œå› ä¸ºä½¿ç”¨æ­¤å£°æ˜ŽåŽæ‰“åŒ…çš„äºŒè¿›åˆ¶çš„å‡½æ•°ä¸ä¼šæœ‰ä¿®é¥°è¯
      //å‡è®¾æ­¤æ˜¯éœ€è¦è°ƒç”¨çš„ä»£ç ï¼Œfunc1ä¸ºintç±»åž‹è¿”å›žäº†114514ï¼Œfunc2ä¸ºboolç±»åž‹ï¼Œè¿”å›žtrue
      int func1(){
        return 114514;
      }
      bool func2(){
        return true;
      }
    }
    ```
    
    ## 2.åˆ›å»ºæ¨¡ç»„é…ç½®çš„json
    
    * mod_info
      
      ```Json
      [
          {
              "author": "Name", //ä½œè€…åç§°
              "modName": "MyMod", //æ¨¡ç»„åç§°
              "build": 1, //ç‰ˆæœ¬
              "modIntroduce": "This is my mod", //æ¨¡ç»„ä»‹ç»
              "Opencode": false, //æ˜¯å¦å¼€æº
              "OpencodeUrl": null, //å¦‚æžœå¼€æºåˆ™å¡«å†™å¼€æºé“¾æŽ¥
              "enable": false, //æ˜¯å¦å·²å¯ç”¨ï¼Œå¿…é¡»å¡«å†™false
              "enableLibName": "libMyMod.so" //è°ƒç”¨çš„soåº“å®Œæ•´åç§°
          }
      ]
      ```
    * mod_data
      
      ```Json
      [
        [
          {
            "author": "Name", //ä½œè€…åç§°
            "modName": "MyMod", //æ¨¡ç»„åç§°
            "libname": "libMyMod.so" //æ¨¡ç»„çš„å®Œæ•´soåº“åç§°
          },
          [
              {
                "position": "Assembly-CSharp.Cursor.Id", //è¢«hookçš„å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºdllåç§°ï¼Œç¬¬äºŒä¸ªä¸ºå‘½åç©ºé—´ï¼ˆæ²¡æœ‰åˆ™ç›´æŽ¥å¡«å†™ç¬¬ä¸‰ä¸ªï¼‰ï¼Œç¬¬ä¸‰ä¸ªä¸ºå‡½æ•°/å­—æ®µ
                "function": ["func1"], //ä½ çš„å‡½æ•°ï¼Œå¯ä»¥å¤šä¸ªå¦‚["func1", "func2"]
                "type": "int", //ç±»åž‹
                "arrays": 0 //è¿”å›žçš„æ•°ç»„ä¸­çš„å€¼ï¼Œ0åˆ™æ˜¯ç¬¬ä¸€ä¸ªå€¼ï¼Œ1åˆ™æ˜¯ç¬¬äºŒä¸ªå€¼ä»¥æ­¤ç±»æŽ¨
              },
              {
                //å¦‚æžœéœ€è¦hookå¤šä¸ªå‡½æ•°
                //ä¸Žä¸Šæ–¹ç›¸ä¼¼
                "position": "Assembly-CSharp.Terraria.NPC.GetNPCLocation", 
                "function": ["func2"],
                "type": "bool",
                "arrays": 0
              }
          ]
        ]
      ]
      ```
      
      ## 3.åˆ›å»ºæ¨¡ç»„ç›®å½•
      
      ```txt
      MyMod-Name æ¨¡ç»„æ ¹ç›®å½•ï¼Œå¿…é¡»ä¸ºæ¨¡ç»„åç§°+ä½œè€…åç§°
      MyMod-Name/resources æ¨¡ç»„ä½¿ç”¨çš„èµ„æº
      MyMod-Name/icon.png æ¨¡ç»„å›¾æ ‡
      MyMod-Name/libMyMod.so æ¨¡ç»„soåº“
      MyMod-Name/mod_data.json æ¨¡ç»„é…ç½®
      MyMod-Name/mod_info.json æ¨¡ç»„ä¿¡æ¯
      ```
    
    ## 4.æ‰“åŒ…æ¨¡ç»„
    
    * æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªzipæ–‡ä»¶ï¼Œä½ å¯ä»¥è¿è¡ŒPythonè„šæœ¬æˆ–è€…ç¬¬ä¸‰æ–¹å·¥å…·è¿›è¡ŒåŽ‹ç¼©ï¼ŒåŽç¼€ä¸ºefmod
    * è¿è¡ŒPythonè„šæœ¬è¯·ç¡®ä¿å®‰è£…äº†zipfileåº“
      > pip install zipfile
    * ä¼ å…¥æ¨¡ç»„ç›®å½•å³å¯å¦‚ï¼š
      > /home/eternalfuture/Documents/GitHub/Terraria-ToolBox/MyMod-Name

